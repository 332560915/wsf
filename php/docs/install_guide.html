<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
  <title>WSO2 WSF Installation Guide</title>
  <link href="style/api_style.css" rel="stylesheet" type="text/css"
  media="all" />
</head>

<body xml:lang="en">
<h1>WSO2 WSF/PHP Installation Guide</h1>

<p>This document guides you on how to install the WSO2 Web Services
Framework/PHP extension, and run the server and client samples on Linux and
Microsoft Windows operating systems.</p>

<p>Please send your feedback to the user mailing list: <a
href="mailto:wsf-php-user@wso2.org">wsf-php-user@wso2.org</a>. Kindly see <a
href="https://www-lk.wso2.com/repo/wso2/php_axis2/extension/xdocs/index.html#mail">Home
page</a> for subscription.</p>

<h2>Contents</h2>
<ul>
  <li><a href="#Common Installation Instructions">Common Installation
    Instructions</a></li>
  <li><a href="#1.Installing and Running on Linuxs">Installing and Running on
    Linux</a></li>
  <li><a
    href="#2.Installing and Running on Microsoft Windows (win32)">Installing
    and Running on Microsoft Windows (win32)</a>
    <ul>
      <li><a href="#Build PHP on Windows">How to build WSF/PHP under Windows from source</a></li>
      <ul>
          <li><a href="#Requirements">Requirements</a></li>
    <li><a href="#Building WSO2 WSF/PHP Extension">Building WSF/PHP extension</a></li>
    <li><a href="#Building the WSO2 WSF/PHP Extension with PHP WIN32 Build System">Building the WSO2 WSF/PHP Extension with PHP WIN32 Build System</a></li>
        </ul>
      <li><a href="#Installing WSO2 WSF As a PHP Extension">Installing WSO2
        WSF as a PHP Extension</a></li>
    </ul>
  </li>
</ul>
<a id="Common Installation Instructions"></a>

<h2>Common Installation Instructions</h2>

<p>To get the distributions working, you need the following installed in your
system.</p>
<ul>
  <li>PHP 5.1.1 or later, which can be downloaded from the <a
    href="http://www.php.net/">PHP </a> official Web site. Please refer to
    the additional note on installing PHP as a DSO module to the Apache2 Web
    server.
    <p>If you are using a pre-installed version of PHP, please make sure that
    you have the developer version installed, so that you can compile the
    WSO2 WSF/PHP source.</p>
  </li>
  <li>libxml2 <a href="http://xmlsoft.org/downloads.html">Download</a><a
    href="http://xmlsoft.org/downloads.html"></a> (Note: Most Linux systems
    have libxml2 by default.)</li>

    <li>zlib, iconv for win32 <a href="http://www.zlatkovic.com/pub/libxml">Download</a> (Note: Most Linux systems
    have zlib and iconv by default.). </li>

    <li>OpenSSL (Use the msi Installer) <a href="http://www.openssl.org/" >Download</a></li>
    <li>Sqlite or Mysql (needed for reliable messaging) <a href="http://www.sqlite.org/download.html" >Download Sqlite</a>, <a href="http://dev.mysql.com/downloads/" >Download Mysql</a></li>
</ul>
<a id="1.Installing and Running on Linuxs"></a>

<h2>1. Installing and Running on Linux</h2>

<p>1. Go to the directory where you have extracted the source distribution.
Run the following:</p>
<ul>
  <li>./configure</li>
  <li>make</li>
  <li>make install</li>
</ul>

<p>Note: You may require super user privileges to run 'make install' on your
system.</p>

<p>2. After installing the extension, you have to edit the php.ini file and
add the following line to the php.ini file:<br />
<b><i>extension=wsf.so&nbsp;</i></b></p>
    <p>
        <b><i></i></b>Also enable xsl extension that comes with PHP. &nbsp;
    </p>
    <p>
        <strong><em>extension=xsl.so</em></strong></p>
    <p>
        <strong></strong>If you are using the source distribution, go to ext/xsl directory
        and do&nbsp; ./<strong>phpize</strong>, ./<strong>configure</strong> , ./<strong>make</strong>,
        ./<strong>make install</strong> to install the xsl extension.</p>
    <p>
        Set extension_dir entry to point to your extension installation directory.
    </p>
    <p>
        eg <strong>extension_dir="usr/local/lib/php/extensions/debug-zts-***"</strong>.
        The last directory depends on your php version.</p>

<p>3. Copy the scripts folder to your Web server's document root.</p>

<p>4. Also, copy all the samples to your Web server's document root.</p>

<p>5. Test with a Web browser. For example, access <a href="http://localhost/echo_client.php">http://localhost/echo_client.php</a></p>

<p></p>

<p><i>Notes:</i></p>
<ul>
  <li><i>You may run './configure --help' for more information on configure
    options.</i></li>
  <li><i>If you don't provide the --prefix configure option, WSO2 WSF/PHP
    will be installed into the PHP extensions directory by default.</i></li>
  <li><i>If you provide the --prefix configure option, you will have to edit
    the php.ini file in your system and add the following entry.</i></li>
  <li><i>Note that WSO2 WSF/C will be installed to a folder named "wsf_c" in
    the prefix folder.<br />
    <b>[wsf] wsf.home="path to your wsf_c installation directory"</b><br />
    <b>
    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;wsf.log_level=3</b><br />
    </i></li>
</ul>
<a id="2.Installing and Running on Microsoft Windows (win32)"></a>

<h2>2. Installing and Running on Microsoft Windows (win32)</h2>
<a id="Build WSO2 WSF for C on Windows from Source"></a>

<h3>Building  WSO2 WSF/PHP on MS Windows from Source</h3>
<a id="Requirements"></a>

<h4>
        &nbsp; Requirements</h4>
    <p>
        &nbsp;You need to download following dependency libraries:
    </p>
    <p>
        libxml2 binary distribution <a href="http://www.zlatkovic.com/pub/libxml/">Download</a>
    </p>
    <p>
        zlib binary distribution <a href="http://www.zlatkovic.com/pub/libxml/">Download</a>
    </p>
    <p>
        iconv binary distribution <a href="http://www.zlatkovic.com/pub/libxml/">Download</a>
    </p>
    <p>
        OpenSSL binary distribution <a href="http://www.slproweb.com/products/Win32OpenSSL.html"> Download</a>
    </p>
    <p>
        PHP Source and PHP Binary distributions <a href="http://www.php.net/downloads"> Download</a>
        </p>
    <p>
        Win32build [ win32 buildtools for PHP ]<a href="http://www.php.net/extra/win32build.zip"> Download</a>
    </p>
    <p>
        Mysql Server 5 [When using Reliable Messaging With MySql Database ]<a href="http://dev.mysql.com/downloads/"> Download</a>
        </p>
    <p>
        In addition you need to have visual studio installed on your system. 
    </p>
    <a id="Building WSO2 WSF/PHP Extension"></a>
<h4><strong>Building WSO2 WSF/PHP Extension</strong></h4>

<p>
        &nbsp;WSF/PHP extension is build on top of WSF/C Web Services Framework.&nbsp; The
    extension source code is packaged with WSF/C code. When you download the wso2-wsf-php-src.zip
    file, it will contain following dirctory structure.
</p>
    <pre>        wso2-wsf-php-src
            | 
            +---src 
            | 
            +--- wsf_c 
            | 
            +--- docs 
            | 
            +--- samples 
            | 
            +--- scripts 
        </pre>
      <p>  In the wso2-wsf-php-src
        directory you will find a file named configure.in file. Open this file and set your
        dependency directory locations to relevent entries. You can build with debug symbol
        by setting DEBUG=1 option. Next run the build.bat file located in wso2-wsf-php-src
        directory. It should build the binary dist pack to wso2-wsf-php-src directory.</p>
<a id="#Building the WSO2 WSF/PHP Extension with PHP WIN32 Build System"></a>

<h4>Building the WSO2 WSF/PHP Extension with PHP WIN32 Build System</h4>

<p>1. Before trying this, please refer to the README.WIN32-BUILD-SYSTEM file
in the PHP source distribution, and build the PHP source under MS Windows.</p>

<p>2. Copy wsf_php folder to php_source/ext directory.</p>

<p>3. Run buildconf.bat file to rebuild the configure.js file.</p>

<p>4. "cscript /nologo configure.js --help" will give the configuration
options. You will find the option --with-wsf.<br />
</p>

<p>5. Add the following entries to config.nice.bat file.</p>

<p>        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;
            &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
        "--with-extra-includes=&lt;Libxml2 bin dir&gt;\include;&lt;iconv
bin directory&gt;\include;&lt;zlib bin dir&gt;\include;&lt;wsf-c
dir&gt;\include" </p>

<p>        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;
            &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
    "-- with-extra-libs=&lt;Libxml2 bin dir&gt;\lib;&lt;iconv bin
dir&gt;\lib;&lt;zlib bin dir&gt;\lib;&lt;wsf-c dir&gt;\lib"</p>

<p>        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;
        &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
    "--with-wsf=shared"</p>

<p>6. Run the above config.nice.bat file to configure the wsf extension as a
dll.</p>

<p>7. "nmake" will build the wsf extension.<br />
</p>
<a id="Installing WSO2 WSF As a PHP Extension"></a>

<h3>Installing WSO2 WSF as a PHP Extension</h3>
    <p>
        1. If you built the extension from the source, you will find the wso2-wsf-php-bin-1.2.0-win32
        (binary pack) located in your source directory.</p>
    <p>
        &nbsp; You can get the binary pack by downloading and extracting the binary distribution
        as well.&nbsp;</p>
    <p>
        It will have the following structure</p>
<pre>        wso2-wsf-php-bin-1.2.0-win32
	           |
                    +-- wsf_c
                    |
                    +-- wsf.dll
                    |
                    +-- docs
                    |
                    +-- scripts
                    |
                    +-- samples </pre>

<p>
                        2. Copy wsf.dll to the &lt;PHP installation directory&gt;/ext direcotory.</p>

<p>
    3. Add wso2-wsf-php-bin-1.2.0-win32\wsf_c\lib directory to the PATH environment variable.</p>
    <p>
        4. Add the above listed dependency library dlls to the PATH environment variable.</p>
    <p>
        5. Add the following entries to your php.ini file which is in your PHP
installation location.<br />
       [wsf]
    <br />
        <strong>
    wsf.home="&lt;path_to_extract_folder&gt;\wsf_c"
    <br />
    wsf.log_path="&lt;path to extract_folder&gt;\wsf_c\logs"
    <br />
    wsf.log_level=3 </strong>
    </p>
    <p>
        <strong></strong><strong>
       extension=wsf.dll </strong>
    </p>
    <p>
        Set entension_dir entry to your extensions directory.</p>

<p>
    <strong>extension_dir ="./ext"</strong></p>
    <p>
        Also enable php_xsl extension
    </p>
    <p>
        <strong>extension = php_xsl.dll</strong></p>
    <p>
        6. Configure the Apache2 Web server with PHP as follows.<br />
    </p>

<p>
    6.1. Copy php5apache2.dll to Apache2/modules directory and add the following entries in httpd.conf file.<br />
    &nbsp; &nbsp;
</p>
    <p>
        &nbsp; &nbsp; LoadModule php5_module modules/php5apache2.dll <br />
        &nbsp; &nbsp; PHPIniDir " < your php.ini file location> "<br />
        &nbsp;&nbsp;
    </p>
    <p>
        &nbsp;&nbsp; &nbsp;AddType application/x-httpd-php .php .phtml<br />
        &nbsp;&nbsp; AddType application/x-httpd-php-source .phps<br />
    </p>

<p>
    7. Copy the scripts folder and the samples folder to your Apache Web server's
document root.</p>

<p>Now you should be able to run the samples in the samples directory.</p>
</body>
</html>
